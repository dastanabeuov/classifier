<% xcategory.xclasses.roots.find_each(batch_size: 1000) do |xclass| %>
  <li data-toggle="collapse" data-target="#xclass-<%= xclass.id %>" class="collapsed">
    
    <a class="file" href="<%= xroot_xcategory_xclass_path(xclass.xcategory.xroot, xclass.xcategory, xclass) %>">
    <% if xclass.children? %>
      <i class="fa fa-folder fa-lg"></i>
    <% else %>
      <i class="fa fa-file fa-lg"></i>
    <% end %>
    </a>
    
    <%= truncate(xclass.code, :length => 10) %> <%= link_to_unless_current truncate(xclass.title, :length => 18) %>

    <% if xclass.children? %>
      <span class="arrow xcategories-sub-children-link" data-xroot-id="<%= xclass.xcategory.xroot.id %>" data-xcategory-id="<%= xclass.xcategory.id %>" data-xclass-id="<%= xclass.id %>"></span>
    <% end %>
  </li>
    
  <ul class="sub-menu collapse pl-2 xcategories-sub-children-<%= xclass.id %>" id="xclass-<%= xclass.id %>">
  </ul>
<% end %>